<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UniShop</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <!-- Bootstrap 5.3 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KyZXEAg3QhqLMpG8r+Knujsl5/0p5I5b5s4vcAL9ANw7PB6zXw1p5I1t5x5L5x5g5L5x5J5g5L5x5"
        crossorigin="anonymous">
    <!-- Incluir Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="/ApiFlask/Frontend/Static/css/style.css">
</head>

<body>
    <header class="text-dark position-fixed w-100 top-0 start-0" style="background-color: #ff7a28; z-index: 9999;">
        <div class="container-fluid py-3 border-top border-secondary">
            <div class="row align-item-center">
                <div class="col-md-2 text-center text-md-start">
                    <a href="{{ url_for('vista') }}" class="navbar-brand">
                        <img style="padding-top: 20%; " src="{{ url_for('static', filename='img/test.png') }}"
                            alt="UniShop logo" class="img-fluid">
                    </a>
                </div>
                <div class="col-md-8">
                    <nav class="navbar navbar-expand-lg navbar-light d-flex justify-content-between align-items-center">
                        <!-- Botón hamburguesa en móviles -->
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                            data-bs-target="#navbarNav">
                            <span class="navbar-toggler-icon"></span>
                        </button>

                        <!-- Enlaces del Navbar -->
                        <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
                            <ul class="navbar-nav">
                                <li class="nav-item">
                                    <a class="nav-link active" href="#" onclick="scrollToSection('inicio')">Inicio</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#" onclick="scrollToSection('quienes-somos')">Quiénes
                                        Somos</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#" onclick="scrollToSection('productos')">Productos</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#" onclick="scrollToSection('sucursal')">Sucursales</a>
                                </li>
                            </ul>
                        </div>
                        <!-- Icono de Carrito de Compras -->
                        <div class="nav-item">
                            <a class="nav-link text-white text-decoration-none position-relative" href="#" id="carrito"
                                data-bs-toggle="modal" data-bs-target="#carritoModal">
                                <i class="bi bi-cart3 fs-4"></i>
                                <span class="badge rounded-pill" id="contador-carrito">0</span>
                            </a>
                        </div>

                        <!-- Icono de Usuario / Saludo -->
                        <div class="nav-item ms-3">
                            {% if session.get('usuario') %}
                            <!-- Si el usuario está logeado, mostrar saludo y enlace al perfil -->
                            <a class="nav-link text-white d-flex align-items-center" href="{{ url_for('perfil') }}">
                                <i class="bi bi-person-circle fs-4 me-1"></i>
                                <span>Hola,{{ session['usuario']['username'] }}</span>
                            </a>
                            {% else %}
                            <!-- Si no está logeado, mostrar enlace de inicio de sesión -->
                            <a class="nav-link text-white d-flex align-items-center" href="{{ url_for('login') }}">
                                <i class="bi bi-person-circle fs-4 me-1"></i>
                                <span>Iniciar sesión</span>
                            </a>
                            {% endif %}
                        </div>
                    </nav>
                    <div class="container">
                        <div class="row justify-content-center" id="indicadoresEconomicos">
                            <div class="col-md-3">
                                <p class="h6">Indicadores Económicos</p>
                            </div>
                            <div class="col-md-3">
                                <p id="usdValue" class="h6">Dólar (USD): Cargando...</p>
                            </div>
                            <div class="col-md-3">
                                <p id="eurValue" class="h6">Euro (EUR): Cargando...</p>
                            </div>
                            <div class="col-md-3">
                                <div class="dropdown text-end">
                                    <a href="#" class="text-white text-decoration-none dropdown-toggle"
                                        id="currencyConverterDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                        Convertidor de Monedas
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-end p-3 shadow" style="min-width: 300px;">
                                        <div class="mb-3">
                                            <label for="amount" class="form-label">Cantidad</label>
                                            <div class="input-group">
                                                <span class="input-group-text" id="currencySymbol">$</span>
                                                <input type="number" class="form-control" id="amount"
                                                    placeholder="Ingrese la cantidad">
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="fromCurrency" class="form-label">Moneda de Origen</label>
                                            <select class="form-select" id="fromCurrency">
                                                <option value="clp">Peso Chileno (CLP)</option>
                                                <option value="usd">Dólar (USD)</option>
                                                <option value="eur">Euro (EUR)</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="toCurrencies" class="form-label">Resultado</label>
                                            <div id="toCurrencies"></div>
                                        </div>
                                        <button class="btn btn-primary w-100" id="convertButton">Convertir</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>



    <main class="container my-4" style="padding-top: 10%;">

        <h1 id="lista" class="margin-top50%">E-Comerce UniShop</h1>

        <div id="carouselExampleIndicators" class="carousel slide">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"
                    aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                    aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
                    aria-label="Slide 3"></button>
            </div>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="{{ url_for('static', filename='img/Madre.jpg') }}" class="d-block w-100">

                </div>
                <div class="carousel-item">
                    <img src="{{ url_for('static', filename='img/PC.jpg') }}" class="d-block w-100">
                </div>
                <div class="carousel-item">
                    <img src="{{ url_for('static', filename='img/Procesador.jpg') }}" class="d-block w-100">
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
                data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
                data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>


        <section id="quienes-somos" class="bg-light py-5">
            <div class="container text-center mt-5">
                <h3 class="display-6">Quiénes Somos</h3>

                <!-- Sección Nuestra Historia -->
                <section class="section historia mt-5 p-4 rounded shadow">
                    <h4><strong>Nuestra Historia</strong></h4>
                    <p>
                        <b>UNISHOP</b>, fue creada a finales del año 2025 y ha nacido a partir de una idea, la cual fue
                        tomando
                        fuerza, hasta convertirse un software de calidad y exclencia

                    </p>
                </section>

                <!-- Sección Misión -->
                <section class="section mision mt-5 p-4 rounded shadow">
                    <h4><strong>Misión</strong></h4>
                    <p>
                        En <b>UNISHOP</b> nos preocupamos de que cada producto entregado a nuestro clientes, sea de la
                        mayor calidad y
                        excelencia para potenciar su negocio y llevarlo al siguiente nivel.
                    </p>
                </section>



                <!-- Sección Nuestros Valores -->
                <section class="section valores mt-5 p-4 rounded shadow">
                    <h4><strong>Nuestros Valores</strong></h4>
                    <div class="row">
                        <div class="col-12 col-md-6 mb-3">
                            <p><b>Compromiso:</b> Nos dedicamos a ofrecer solo lo mejor, con pasión y responsabilidad.
                            </p>
                        </div>
                        <div class="col-12 col-md-6 mb-3">
                            <p><b>Calidad:</b> Cada producto de <b>UNISHOP</b> está fabricado para durar, con
                                materiales de la más alta calidad, garantizando confort y resistencia.</p>
                        </div>
                        <div class="col-12 col-md-6 mb-3">
                            <p><b>Excelencia en atención al cliente:</b> Nos importa tu satisfacción. Estamos a tu
                                disposición en cada etapa del proceso de compra, asegurándonos de que encuentres lo que
                                necesitas.</p>
                        </div>
                        <div class="col-12 col-md-6 mb-3">
                            <p><b>Innovación:</b> Siempre buscamos nuevas maneras de mejorar y brindarte lo último en
                                diseño y tecnología.</p>
                        </div>
                    </div>
                </section>

                <!-- Productos -->
                <section id="productos">
                    <div class="container text-center mt-5" id="tarjeta">
                        <h3 class="display-6">Productos</h3>
                        <div class="row mt-5" id="crd">
                            {% for producto in productos %}
                            <div class="col-sm-12 col-md-4 col-lg-4 py-3">
                                <div class="card shadow producto-card">
                                    <img src="{{ url_for('static', filename='img/Asus.jfif') }}" class="card-img-top"
                                        alt="{{ producto.descripcion }}">
                                    <div class="card-body">
                                        <h5 class="card-title">{{ producto.nombreProducto }}</h5>
                                        <p class="card-text">{{ producto.descripcion }}</p>
                                        <p class="card-text card-precio">Precio: ${{ producto.precio }}</p>
                                        <p class="card-text">
                                            <strong>Stock Disponible:</strong> {{ producto.stock_disponible }}
                                        </p>

                                        <!-- Cantidad -->
                                        <div class="mb-2 text-start">
                                            <label class="form-label mb-1">Cantidad</label>
                                            <input type="number" class="form-control form-control-sm cantidad" value="1"
                                                min="1">
                                        </div>

                                        <!-- Sucursal -->
                                        <div class="mb-3 text-start">
                                            <label class="form-label mb-1">Sucursal</label>
                                            <select class="form-select form-select-sm codSucursal">
                                                {% for sucursal in sucursales %}
                                                <option value="{{ sucursal.codSucursal }}">
                                                    {{ sucursal.direccion }}
                                                </option>
                                                {% endfor %}
                                            </select>
                                        </div>

                                        <a href="#" class="btn btn-primary btn-agregar"
                                            data-producto-id="{{ producto.codProducto }}"
                                            data-precio="{{ producto.precio }}">
                                            Añadir al carrito
                                        </a>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </section>

                <!-- Sucursales -->
                <section id="sucursal">
                    <div class="container text-center mt-5">
                        <h3 class="display-6">Conoce Nuestras Sucursales</h3>
                        <div class="row mt-5" id="sucursales-list">
                            {% for sucursal in sucursales %}
                            <div class="col-md-4 col-sm-6 mb-4">
                                <div class="card shadow-lg border-0 rounded-4">
                                    <div class="card-body">
                                        <h5 class="card-title text-primary">Sucursal</h5>
                                        <p class="card-text">
                                            <strong>Dirección:</strong> {{ sucursal.direccion }} <br>
                                            <strong>Teléfono:</strong> {{ sucursal.telefono }} <br>
                                            <strong>Región:</strong>
                                            {% for region in regiones %}
                                            {% if region.codRegion == sucursal.codRegion %}
                                            {{ region.nombreRegion }}
                                            {% endif %}
                                            {% endfor %} <br>
                                            <strong>Comuna:</strong>
                                            {% for comuna in comunas %}
                                            {% if comuna.codRegion == sucursal.codRegion and comuna.codProvincia ==
                                            sucursal.codProvincia and comuna.codComuna == sucursal.codComuna %}
                                            {{ comuna.nombreComuna }}
                                            {% endif %}
                                            {% endfor %}
                                        </p>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </section>

                <!-- Sucursales (igual que lo tenías) -->
                <!-- ... -->

                <!-- Modal Carrito -->
                <div class="modal fade" id="carritoModal" tabindex="-1" aria-labelledby="carritoModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="carritoModalLabel">Productos en el carrito</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <!-- Contenido del modal, se muestran los productos agregados -->
                            </div>
                            <div id="productosAgregados"></div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                                    id="btnVaciarCarrito">Vaciar Carrito</button>
                                <a href="{{ url_for('pago') }}" class="btn btn-success">Pagar</a>
                            </div>
                        </div>
                    </div>
                </div>

    </main>

    <footer class="bg-dark text-white text-center py-3">
        <p>&copy; 2025 E-Comerce UniShop. Todos los derechos reservados.</p>
    </footer>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script src="{{ url_for('static', filename='js/index.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
    <script src="{{ url_for('static', filename='js/indicadores.js') }}"></script>
    <script src="{{ url_for('static', filename='js/conversion.js') }}"></script>
    <!-- Bootstrap 5.3 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVFhzA1NawF2CwDWtID1ZueFbiSygbYyIlsLzC5lzWRTl5L5x5x5L5x5J5g5L5x5"
        crossorigin="anonymous"></script>

</body>

</html>